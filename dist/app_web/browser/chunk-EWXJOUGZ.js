import{a as me,b as ue,c as pe,d as de,e as fe,f as ge,g as ve,h as K}from"./chunk-KOKCLHPU.js";import{B as k,C as R,D as ce,E as A,F as N,G as S,H as le,I as E,J as j,K as g,L as T,M as q,O as Y,P as U,R as V,S as L,T as B,U as G,V as H,W as M,ba as $,ca as z,da as he,ea as J}from"./chunk-WKTDGYLA.js";import{a as D,b as se,g as be,h as Me,i as Ce,j as _e,k as u}from"./chunk-PXTTDNGE.js";import{Ab as f,Cb as x,Kb as s,Lb as C,Ob as F,Pb as W,Ra as c,Sa as v,T as oe,Y as I,Z as O,ca as d,g as ee,ga as h,ha as P,jb as b,kb as ie,lb as l,na as re,tb as a,ub as i,va as ne,vb as ae,vc as w,xc as _,z as te}from"./chunk-MMOG4XBI.js";function Z(t){t||(re(Z),t=d(ne));let e=new ee(m=>t.onDestroy(m.next.bind(m)));return m=>m.pipe(oe(e))}var ye=(()=>{let e=class e{constructor(){this.apiUrl=K.baseUrl,this.http=d(D)}getAccounts(){let o=`${this.apiUrl}/accounts`;return this.http.get(o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ne=()=>["../signin"],je=()=>["pass-recover"];function Te(t,e){if(t&1&&(a(0,"mat-error"),s(1),i()),t&2){let m=x();c(),C(m.errorMessage)}}function qe(t,e){if(t&1&&(a(0,"mat-error"),s(1),i()),t&2){let m=x();c(),C(m.errorMessage2)}}function Ue(t,e){t&1&&(a(0,"mat-error",13),s(1,"Usuario/email o contrase\xF1a incorrectos."),i())}var X=(()=>{let e=class e{constructor(o,r){this.fb=o,this.loginSer=r,this.user=new Y("",[g.required]),this.pass=new Y("",[g.required]),this.router=d(Me),this.errorMessage="",this.accounts=[],this.errorMessage2="",this.hide=!0,this.success=!0,te(this.user.statusChanges,this.user.valueChanges).pipe(Z()).subscribe(()=>this.userErrorMessage()),this.loginForm=this.fb.group({user:["",[g.required]],pass:["",[g.required]]})}ngOnInit(){this.loadAcc()}loadAcc(){this.loginSer.getAccounts().subscribe(o=>{console.log(o),this.accounts=o})}userErrorMessage(){this.user.hasError("required")?this.errorMessage="Debes llenar este campo":this.errorMessage=""}passErrorMessage(){this.pass.hasError("required")?this.errorMessage2="Debes llenar este campo":this.errorMessage2=""}clickEvent(o){this.hide=!this.hide,o.stopPropagation()}onSubmit(){if(this.loginForm.valid){console.log("Form Submitted",this.loginForm.value);let o=this.loginForm.value,r={user:o.user,email:o.user,pass:o.pass};for(let n=0;n<this.accounts.length;n++)(r.email==this.accounts[n].email||r.email==this.accounts[n].user)&&r.pass==this.accounts[n].pass?(console.log("Account encontrada"),this.success=!0,this.router.navigate([""])):(console.log("Account no encontrada"),this.success=!1)}}};e.\u0275fac=function(r){return new(r||e)(v(G),v(ye))},e.\u0275cmp=h({type:e,selectors:[["app-forms"]],standalone:!0,features:[F],decls:23,vars:13,consts:[[1,"form-container"],[1,"form",3,"ngSubmit","formGroup"],[1,"user"],["matInput","","placeholder","John Doe","formControlName","user","required","",3,"blur"],[4,"ngIf"],[1,"pass"],["matInput","","placeholder","pass123$asdf","formControlName","pass","required","",3,"blur","type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"alternativas"],["title","Crea tu cuenta","routerLinkActive","active",1,"alternativas__enlace",3,"routerLink"],["title","Cambia la contrase\xF1a","routerLinkActive","active",1,"alternativas__enlace",3,"routerLink"],["mat-flat-button","","type","submit","color","custom-color",1,"enviar",3,"disabled"],["class","error__formulario",4,"ngIf"],[1,"error__formulario"]],template:function(r,n){r&1&&(a(0,"div",0)(1,"form",1),f("ngSubmit",function(){return n.onSubmit()}),a(2,"mat-form-field",2)(3,"mat-label"),s(4,"Usuario o correo electr\xF3nico"),i(),a(5,"input",3),f("blur",function(){return n.userErrorMessage()}),i(),b(6,Te,2,1,"mat-error",4),i(),a(7,"mat-form-field",5)(8,"mat-label"),s(9,"Ingresa tu contrase\xF1a"),i(),a(10,"input",6),f("blur",function(){return n.passErrorMessage()}),i(),b(11,qe,2,1,"mat-error",4),a(12,"button",7),f("click",function(Ie){return n.clickEvent(Ie)}),a(13,"mat-icon"),s(14),i()()(),a(15,"div",8)(16,"a",9),s(17,"A\xFAn no tengo cuenta"),i(),a(18,"a",10),s(19,"Me olvid\xE9 la contrase\xF1a"),i()(),a(20,"button",11),s(21,"ENTRAR"),i(),b(22,Ue,2,0,"mat-error",12),i()()),r&2&&(c(),l("formGroup",n.loginForm),c(5),l("ngIf",n.user.invalid),c(4),l("type",n.hide?"password":"text"),c(),l("ngIf",n.pass.invalid),c(),ie("aria-label","Hide password")("aria-pressed",n.hide),c(2),C(n.hide?"visibility_off":"visibility"),c(2),l("routerLink",W(11,Ne)),c(2),l("routerLink",W(12,je)),c(2),l("disabled",n.loginForm.invalid),c(2),l("ngIf",!n.success))},dependencies:[N,A,k,R,ce,z,$,H,U,j,T,q,B,M,V,L,E,S,le,J,he,u,Ce,_e,_,w],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.form[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;flex-direction:column}.user[_ngcontent-%COMP%]{margin-top:10px}mat-form-field[_ngcontent-%COMP%]{margin:10px 0}.user[_ngcontent-%COMP%], .pass[_ngcontent-%COMP%], .alternativas[_ngcontent-%COMP%]{width:50%}a[_ngcontent-%COMP%]{color:#696363}a[_ngcontent-%COMP%]:visited{color:#607c3c}.alternativas__enlace[_ngcontent-%COMP%]{display:block;margin-bottom:10px}td[_ngcontent-%COMP%]{padding-right:8px}.enviar[_ngcontent-%COMP%]{width:20%;height:50px;box-shadow:0 5px 10px #000a}.enviar[_ngcontent-%COMP%]:hover{background-color:#6e9911}.mat-custom-color[_ngcontent-%COMP%]{background-color:#95d907!important;transition-property:background-color;transition-duration:.2s;font-family:Nunito!important;font-size:large;color:#fff!important}.mat-custom-color[disabled][_ngcontent-%COMP%]{background-color:#636363!important}.mat-custom-color[_ngcontent-%COMP%]:hover{background-color:#6e9911!important}.error__formulario[_ngcontent-%COMP%]{margin-top:10px}"]});let t=e;return t})();var xe=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=h({type:e,selectors:[["app-login"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,n){r&1&&(a(0,"div",0)(1,"h1"),s(2,"INICIAR SESI\xD3N"),i()(),ae(3,"app-forms")(4,"router-outlet"))},dependencies:[be,X],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}h1[_ngcontent-%COMP%]{margin-top:30px;font-family:Nunito!important}"]});let t=e;return t})();var Fe=(()=>{let e=class e{constructor(){this.apiUrl=K.baseUrl,this.http=d(D)}getAccounts(){let o=`${this.apiUrl}/accounts`;return this.http.get(o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Be(t,e){if(t&1&&(a(0,"mat-error"),s(1),i()),t&2){let m=x();c(),C(m.errorMessage)}}function Ge(t,e){t&1&&(a(0,"mat-error",7),s(1,"Email no pertenece a ninguna cuenta."),i())}var Se=".form-container[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}mat-form-field[_ngcontent-%COMP%]{margin:10px 0}h1[_ngcontent-%COMP%]{margin-top:30px}p[_ngcontent-%COMP%]{margin:0 10% 2%;font-size:large}td[_ngcontent-%COMP%]{padding-right:8px}form[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;align-items:center!important;width:100%}.email[_ngcontent-%COMP%]{width:30%}.enviar[_ngcontent-%COMP%]{width:20%;height:50px;box-shadow:0 5px 10px #000a}.mat-custom-color[_ngcontent-%COMP%]{background-color:#95d907!important;transition-property:background-color;transition-duration:.2s;font-family:Nunito!important;font-size:large;color:#fff!important}.mat-custom-color[disabled][_ngcontent-%COMP%]{background-color:#636363!important}.mat-custom-color[_ngcontent-%COMP%]:hover{background-color:#6e9911!important}.form[_ngcontent-%COMP%]{display:block}.error__email[_ngcontent-%COMP%]{margin-top:10px}",Q=(()=>{let e=class e{constructor(o,r,n){this.dialog=o,this.fb=r,this.recoverSer=n,this.errorMessage="",this.accounts=[],this.success=!0,this.recoverForm=this.fb.group({email:["",[g.required,g.email]]})}ngOnInit(){this.loadAccounts()}loadAccounts(){this.recoverSer.getAccounts().subscribe(o=>{console.log(o),this.accounts=o})}updateErrorMessage(){let o=this.recoverForm.get("email");o.hasError("required")?this.errorMessage="Debes llenar este campo":o.hasError("email")?this.errorMessage="Ingresa un email v\xE1lido":this.errorMessage=""}openDialog(){this.dialog.open(He)}onSubmit(){if(this.recoverForm.valid){console.log("Form Submitted",this.recoverForm.value);let r={email:this.recoverForm.value.email};for(let n=0;n<this.accounts.length;n++)r.email==this.accounts[n].email?(console.log("Account encontrada"),this.success=!0,this.openDialog()):(console.log("Account no encontrada"),this.success=!1)}}};e.\u0275fac=function(r){return new(r||e)(v(me),v(G),v(Fe))},e.\u0275cmp=h({type:e,selectors:[["app-pass-recover"]],standalone:!0,features:[F],decls:14,vars:4,consts:[[1,"form-container"],[1,"form",3,"ngSubmit","formGroup"],[1,"email"],["matInput","","placeholder","pat@example.com","formControlName","email","required","",3,"blur"],[4,"ngIf"],["mat-button","","type","submit","color","custom-color",1,"enviar",3,"disabled"],["class","error__email",4,"ngIf"],[1,"error__email"]],template:function(r,n){if(r&1&&(a(0,"div",0)(1,"h1"),s(2,"RECUPERA LA CONTRASE\xD1A"),i(),a(3,"p"),s(4,"Si has olvidado la contrase\xF1a de tu cuenta, o no tienes acceso a ella, ingresa a continuaci\xF3n el correo electr\xF3nico que usaste para registrarte en PEAK."),i(),a(5,"form",1),f("ngSubmit",function(){return n.onSubmit()}),a(6,"mat-form-field",2)(7,"mat-label"),s(8,"Ingresa tu email"),i(),a(9,"input",3),f("blur",function(){return n.updateErrorMessage()}),i(),b(10,Be,2,1,"mat-error",4),i(),a(11,"button",5),s(12,"Enviar"),i(),b(13,Ge,2,0,"mat-error",6),i()()),r&2){let p;c(5),l("formGroup",n.recoverForm),c(5),l("ngIf",(p=n.recoverForm.get("email"))==null?null:p.invalid),c(),l("disabled",n.recoverForm.invalid),c(2),l("ngIf",!n.success)}},dependencies:[N,A,k,R,z,$,H,U,j,T,q,B,M,V,L,E,S,J,u,ge,_,w],styles:[Se]});let t=e;return t})(),He=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=h({type:e,selectors:[["dialog-elements-example-dialog"]],standalone:!0,features:[F],decls:7,vars:0,consts:[["mat-dialog-title","",2,"color","#6e9911"],["mat-button","","mat-dialog-close",""]],template:function(r,n){r&1&&(a(0,"h2",0),s(1,"EMAIL ENVIADO EXITOSAMENTE"),i(),a(2,"mat-dialog-content"),s(3,"Revisa tu correo electr\xF3nico. Ah\xED encontrar\xE1s un link para poder ingresar a tu cuenta de manera segura."),i(),a(4,"mat-dialog-actions")(5,"button",1),s(6,"Cerrar"),i()())},dependencies:[pe,de,fe,ue,E,S],styles:[Se]});let t=e;return t})();var $e=[{path:"",component:xe},{path:"pass-recover",component:Q}],Ee=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=P({type:e}),e.\u0275inj=O({imports:[u.forChild($e),u]});let t=e;return t})();var Qt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=P({type:e}),e.\u0275inj=O({imports:[_,Ee,ve,X,u,Q,M,se,M]});let t=e;return t})();export{X as a,Qt as b};
