import{a as Z,b as ee,c as te,d as re,e as ie,g as me,h as ce}from"./chunk-KOKCLHPU.js";import{B as j,C as R,D as V,E as G,F as B,G as O,H as L,I as T,J as U,K as l,L as H,M as $,O as b,P as z,R as X,S as J,T as K,U as Q,V as W,W as Y,ba as oe,ca as ne,da as ae,ea as se}from"./chunk-WKTDGYLA.js";import{a as A,h as le,k as v}from"./chunk-PXTTDNGE.js";import{Ab as p,Cb as M,Kb as s,Lb as f,Ob as w,Ra as m,Sa as I,Y as D,Z as C,ba as N,ca as S,ga as d,ha as x,jb as h,kb as P,lb as c,tb as n,ub as a,vb as q,vc as k,xc as E}from"./chunk-MMOG4XBI.js";var pe=(()=>{let e=class e{constructor(r){this.http=r,this.apiUrl=ce.baseUrl}registerAccount(r){let o=`${this.apiUrl}/accounts`;return this.http.post(o,r)}getAccounts(){let r=`${this.apiUrl}/accounts`;return this.http.get(r)}};e.\u0275fac=function(o){return new(o||e)(N(A))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function he(t,e){if(t&1&&(n(0,"mat-error"),s(1),a()),t&2){let u=M();m(),f(u.errorMessage)}}function Me(t,e){if(t&1&&(n(0,"mat-error"),s(1),a()),t&2){let u=M();m(),f(u.errorMessage2)}}function be(t,e){if(t&1&&(n(0,"mat-error"),s(1),a()),t&2){let u=M();m(),f(u.errorMessage3)}}function ve(t,e){if(t&1&&(n(0,"mat-error"),s(1),a()),t&2){let u=M();m(),f(u.errorMessage4)}}function _e(t,e){t&1&&(n(0,"mat-error",13),s(1,"El usuario o el email ya pertenecen a una cuenta."),a())}var ue=".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.user[_ngcontent-%COMP%]{margin-top:10px}mat-form-field[_ngcontent-%COMP%]{margin:10px 0}.user[_ngcontent-%COMP%], .email[_ngcontent-%COMP%], .pass[_ngcontent-%COMP%]{width:50%}td[_ngcontent-%COMP%]{padding-right:8px}mat-form-field[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]:focus{outline:none}mat-form-field[_ngcontent-%COMP%]   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{border:none}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.dialog-container[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0003}.mat-custom-color[_ngcontent-%COMP%]{background-color:#95d907!important;transition-property:background-color;transition-duration:.2s;font-family:Nunito!important;font-size:large;color:#fff!important}.mat-custom-color[disabled][_ngcontent-%COMP%]{background-color:#636363!important}.mat-custom-color[_ngcontent-%COMP%]:hover{background-color:#6e9911!important}.submit__error[_ngcontent-%COMP%]{margin-top:10px}",y=(()=>{let e=class e{constructor(r,o){this.fb=r,this.dialog=o,this.email=new b("",[l.required]),this.user=new b("",[l.required]),this.pass=new b("",[l.required]),this.confirmPass=new b("",[l.required]),this.registerService=S(pe),this.router=S(le),this.accounts=[],this.success=!0,this.errorMessage="",this.errorMessage2="",this.errorMessage3="",this.errorMessage4="",this.hide=!0,this.hide2=!0,this.registerForm=this.fb.group({user:["",[l.required]],email:["",[l.required,l.email]],pass:["",[l.required,l.minLength(12)]],confirmPass:["",l.required]},{validator:this.passwordMatchValidator})}ngOnInit(){this.loadAccounts()}loadAccounts(){this.registerService.getAccounts().subscribe(r=>{console.log(r),this.accounts=r})}get password(){return this.registerForm.get("pass")}get confirmPassword(){return this.registerForm.get("confirmPassword")}onSubmit(){if(this.registerForm.valid){console.log("Form Submitted",this.registerForm.value);let r=this.registerForm.value,o={id:0,user:r.user,email:r.email,pass:r.pass};for(let i=0;i<this.accounts.length;i++)if(o.email===this.accounts[i].email||o.user===this.accounts[i].user){this.success=!1;break}else this.success=!0;this.success&&(this.openDialog(),this.registerService.registerAccount(o).subscribe({next:i=>{this.router.navigate(["/login"])},error:i=>{console.error("eror",i)},complete:()=>{}}))}}passwordMatchValidator(r){return r.get("pass")?.value===r.get("confirmPass")?.value?null:{mismatch:!0}}userErrorMessage(){this.registerForm.get("user").hasError("required")?this.errorMessage="Debes llenar este campo":this.errorMessage=""}updateErrorMessage(){let r=this.registerForm.get("email");r.hasError("required")?this.errorMessage2="Debes llenar este campo":r.hasError("email")?this.errorMessage2="Ingresa un email v\xE1lido":this.errorMessage2=""}passErrorMessage(){let r=this.registerForm.get("pass");r.hasError("required")?this.errorMessage3="Debes llenar este campo":r.hasError("minlength")?this.errorMessage3="La contrase\xF1a debe tener al menos 12 caracteres":this.errorMessage3=""}passErrorMessage2(){this.registerForm.get("confirmPass").hasError("required")?this.errorMessage4="Debes llenar este campo":this.errorMessage4=""}clickEvent(r){this.hide=!this.hide,r.stopPropagation()}clickEvent2(r){this.hide2=!this.hide2,r.stopPropagation()}openDialog(){this.dialog.open(Ce)}};e.\u0275fac=function(o){return new(o||e)(I(Q),I(Z))},e.\u0275cmp=d({type:e,selectors:[["app-forms"]],standalone:!0,features:[w],decls:31,vars:15,consts:[[1,"form-container"],[1,"form",3,"ngSubmit","formGroup"],[1,"user"],["matInput","","placeholder","usuario1234","formControlName","user","required","",3,"blur"],[4,"ngIf"],[1,"email"],["matInput","","placeholder","pat@example.com","formControlName","email","required","",3,"blur"],[1,"pass"],["matInput","","placeholder","pass123$asdf","formControlName","pass","required","",3,"blur","type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","placeholder","pass123$asdf","formControlName","confirmPass","required","",3,"blur","type"],["mat-flat-button","","type","submit","color","custom-color",1,"enviar",3,"disabled"],["class","submit__error",4,"ngIf"],[1,"submit__error"]],template:function(o,i){o&1&&(n(0,"div",0)(1,"form",1),p("ngSubmit",function(){return i.onSubmit()}),n(2,"mat-form-field",2)(3,"mat-label"),s(4,"Nombre de usuario"),a(),n(5,"input",3),p("blur",function(){return i.userErrorMessage()}),a(),h(6,he,2,1,"mat-error",4),a(),n(7,"mat-form-field",5)(8,"mat-label"),s(9,"Email"),a(),n(10,"input",6),p("blur",function(){return i.updateErrorMessage()}),a(),h(11,Me,2,1,"mat-error",4),a(),n(12,"mat-form-field",7)(13,"mat-label"),s(14,"Ingresa tu contrase\xF1a"),a(),n(15,"input",8),p("blur",function(){return i.passErrorMessage()}),a(),h(16,be,2,1,"mat-error",4),n(17,"button",9),p("click",function(F){return i.clickEvent(F)}),n(18,"mat-icon"),s(19),a()()(),n(20,"mat-form-field",7)(21,"mat-label"),s(22,"Confirma tu contrase\xF1a"),a(),n(23,"input",10),p("blur",function(){return i.passErrorMessage2()}),a(),h(24,ve,2,1,"mat-error",4),n(25,"button",9),p("click",function(F){return i.clickEvent2(F)}),n(26,"mat-icon"),s(27),a()()(),n(28,"button",11),s(29,"ENTRAR"),a(),h(30,_e,2,0,"mat-error",12),a()()),o&2&&(m(),c("formGroup",i.registerForm),m(5),c("ngIf",i.user.invalid),m(5),c("ngIf",i.email.invalid),m(4),c("type",i.hide?"password":"text"),m(),c("ngIf",i.pass.invalid),m(),P("aria-label","Hide password")("aria-pressed",i.hide),m(2),f(i.hide?"visibility_off":"visibility"),m(4),c("type",i.hide2?"password":"text"),m(),c("ngIf",i.confirmPass.invalid),m(),P("aria-label","Hide password")("aria-pressed",i.hide2),m(2),f(i.hide2?"visibility_off":"visibility"),m(),c("disabled",i.registerForm.invalid),m(2),c("ngIf",!i.success))},dependencies:[B,G,j,R,V,ne,oe,W,z,U,H,$,K,Y,X,J,se,ae,T,O,L,E,k],styles:[ue]});let t=e;return t})(),Ce=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=d({type:e,selectors:[["dialog-elements-example-dialog"]],standalone:!0,features:[w],decls:10,vars:0,consts:[[1,"dialog-container"],["mat-dialog-title","",2,"color","#6e9911","font-family","Nunito"],["mat-button","","mat-dialog-close",""]],template:function(o,i){o&1&&(n(0,"div",0)(1,"h2",1),s(2,"REGISTRO DE CUENTA EXITOSO"),a(),n(3,"mat-dialog-content"),s(4,"\xA1Has creado tu cuenta exitosamente!."),a(),n(5,"mat-dialog-content"),s(6,"Ingresa a tu email y confirma tu cuenta en el correo que te enviamos."),a(),n(7,"mat-dialog-actions")(8,"button",2),s(9,"Cerrar"),a()()())},dependencies:[te,re,ie,ee,T,O],styles:[ue]});let t=e;return t})();var de=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=d({type:e,selectors:[["app-signin"]],decls:4,vars:0,consts:[[1,"container"]],template:function(o,i){o&1&&(n(0,"div",0)(1,"h1"),s(2,"REGISTRATE"),a()(),q(3,"app-forms"))},dependencies:[y],styles:[".container[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;align-items:center}"]});let t=e;return t})();var fe=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=d({type:e,selectors:[["app-list-account"]],decls:2,vars:0,template:function(o,i){o&1&&(n(0,"p"),s(1,"list-account works!"),a())}});let t=e;return t})();var Ee=[{path:"",component:de},{path:"list",component:fe}],ge=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=x({type:e}),e.\u0275inj=C({imports:[v.forChild(Ee),v]});let t=e;return t})();var st=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=x({type:e}),e.\u0275inj=C({imports:[E,ge,y,me,v]});let t=e;return t})();export{st as a};
